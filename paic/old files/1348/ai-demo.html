<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Purpose Engine AI Demo | Uplift Education</title>
  
  <!-- Favicon and Social Sharing -->
  <link rel="icon" type="image/png" href="https://kesmit3.github.io/paic/upliftlogo.png">
  <link rel="apple-touch-icon" href="https://kesmit3.github.io/paic/upliftlogo.png">
  <meta property="og:title" content="Purpose Engine AI Demo | Uplift Education">
  <meta property="og:description" content="Live AI demonstration of personalized student motivation system">
  <meta property="og:image" content="https://kesmit3.github.io/paic/upliftlogo.png">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --navy: #0D1421;
      --navy-light: #1a2332;
      --blue-500: #0067b1;
      --blue-600: #004b85;
      --purple-500: #8B5CF6;
      --pink-500: #EC4899;
      --amber-500: #F59E0B;
      --green-500: #10B981;
      --slate-400: #94A3B8;
      --slate-500: #64748B;
      --slate-600: #475569;
      --slate-700: #334155;
      --slate-800: #1E293B;
    }
    
    body {
      font-family: 'Plus Jakarta Sans', -apple-system, sans-serif;
      background: var(--navy);
      color: white;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }
    
    /* Header */
    .header {
      background: var(--slate-800);
      border-bottom: 1px solid var(--slate-700);
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .header-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--blue-500) 0%, var(--blue-600) 100%);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }
    
    .header-title {
      font-size: 16px;
      font-weight: 700;
    }
    
    .header-subtitle {
      font-size: 11px;
      color: var(--slate-400);
    }
    
    .status-badge {
      display: flex;
      align-items: center;
      gap: 6px;
      background: rgba(16, 185, 129, 0.2);
      padding: 4px 10px;
      border-radius: 20px;
    }
    
    .status-dot {
      width: 6px;
      height: 6px;
      background: var(--green-500);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .status-text {
      color: var(--green-500);
      font-size: 11px;
      font-weight: 600;
    }
    
    /* Main Layout */
    .main {
      display: flex;
      flex-direction: column;
      height: calc(100vh - 61px);
    }
    
    /* Student Selector */
    .student-selector {
      background: rgba(30, 41, 59, 0.5);
      border-bottom: 1px solid var(--slate-700);
      padding: 12px 16px;
    }
    
    .student-card {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: rgba(51, 65, 85, 0.5);
      border-radius: 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .student-card:hover {
      background: rgba(51, 65, 85, 0.8);
    }
    
    .student-avatar {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: 700;
      flex-shrink: 0;
    }
    
    .student-avatar.blue {
      background: linear-gradient(135deg, var(--blue-500) 0%, var(--blue-600) 100%);
    }
    
    .student-avatar.amber {
      background: linear-gradient(135deg, var(--amber-500) 0%, #F97316 100%);
    }
    
    .student-info {
      flex: 1;
      min-width: 0;
    }
    
    .student-name {
      font-weight: 600;
      font-size: 15px;
    }
    
    .student-meta {
      font-size: 12px;
      color: var(--slate-400);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .student-points {
      text-align: right;
    }
    
    .points-number {
      font-size: 24px;
      font-weight: 800;
      color: #5091cd;
    }
    
    .points-label {
      font-size: 10px;
      color: var(--slate-500);
    }
    
    .dropdown-arrow {
      color: var(--slate-400);
      font-size: 12px;
    }
    
    /* Student List Dropdown */
    .student-list {
      display: none;
      margin-top: 8px;
      background: var(--slate-800);
      border-radius: 16px;
      border: 1px solid var(--slate-700);
      max-height: 240px;
      overflow-y: auto;
    }
    
    .student-list.open {
      display: block;
    }
    
    .student-list-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      cursor: pointer;
      border-bottom: 1px solid rgba(51, 65, 85, 0.5);
      transition: background 0.15s;
    }
    
    .student-list-item:last-child {
      border-bottom: none;
    }
    
    .student-list-item:hover {
      background: rgba(51, 65, 85, 0.5);
    }
    
    .student-list-item.selected {
      background: rgba(0, 103, 177, 0.2);
    }
    
    .student-list-avatar {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 700;
    }
    
    .student-list-info {
      flex: 1;
    }
    
    .student-list-name {
      font-size: 13px;
      font-weight: 600;
    }
    
    .student-list-meta {
      font-size: 11px;
      color: var(--slate-400);
    }
    
    .student-list-points {
      font-size: 14px;
      font-weight: 700;
      color: #5091cd;
    }
    
    /* Quick Stats */
    .quick-stats {
      display: flex;
      gap: 8px;
      margin-top: 12px;
      overflow-x: auto;
      padding-bottom: 4px;
    }
    
    .stat-badge {
      background: rgba(51, 65, 85, 0.5);
      border-radius: 8px;
      padding: 6px 12px;
      font-size: 11px;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .stat-label {
      color: var(--slate-400);
    }
    
    .stat-value {
      font-weight: 700;
    }
    
    .theme-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }
    
    /* Mode Tabs */
    .mode-tabs {
      display: flex;
      gap: 6px;
      padding: 8px 16px;
      background: rgba(30, 41, 59, 0.3);
      border-bottom: 1px solid var(--slate-700);
    }
    
    .mode-tab {
      flex: 1;
      padding: 10px 12px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      background: rgba(51, 65, 85, 0.5);
      color: var(--slate-400);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: all 0.2s;
    }
    
    .mode-tab:hover {
      background: rgba(51, 65, 85, 0.8);
    }
    
    .mode-tab.active.transform {
      background: var(--blue-500);
      color: white;
    }
    
    .mode-tab.active.futureself {
      background: var(--purple-500);
      color: white;
    }
    
    .mode-tab.active.insights {
      background: var(--amber-500);
      color: white;
    }
    
    /* Controls Panel */
    .controls {
      padding: 12px 16px;
      background: rgba(30, 41, 59, 0.2);
      border-bottom: 1px solid var(--slate-700);
    }
    
    .assignment-pills {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 8px;
    }
    
    .assignment-pill {
      padding: 8px 14px;
      border-radius: 20px;
      font-size: 12px;
      cursor: pointer;
      border: none;
      background: rgba(51, 65, 85, 0.5);
      color: var(--slate-400);
      white-space: nowrap;
      transition: all 0.2s;
    }
    
    .assignment-pill:hover {
      background: rgba(51, 65, 85, 0.8);
    }
    
    .assignment-pill.selected {
      background: var(--blue-500);
      color: white;
    }
    
    .custom-input {
      width: 100%;
      margin-top: 8px;
      padding: 12px;
      background: rgba(51, 65, 85, 0.5);
      border: 1px solid var(--slate-600);
      border-radius: 12px;
      color: white;
      font-size: 13px;
      font-family: inherit;
      resize: none;
      height: 60px;
    }
    
    .custom-input::placeholder {
      color: var(--slate-500);
    }
    
    .custom-input:focus {
      outline: none;
      border-color: var(--blue-500);
    }
    
    .transform-btn {
      width: 100%;
      margin-top: 10px;
      padding: 14px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      border: none;
      background: linear-gradient(135deg, var(--blue-500) 0%, var(--blue-600) 100%);
      color: white;
      transition: all 0.2s;
    }
    
    .transform-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(0, 103, 177, 0.4);
    }
    
    .transform-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    .suggestion-pills {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .suggestion-pill {
      padding: 8px 14px;
      border-radius: 20px;
      font-size: 12px;
      cursor: pointer;
      border: none;
      background: rgba(51, 65, 85, 0.5);
      color: var(--slate-400);
      transition: all 0.2s;
    }
    
    .suggestion-pill:hover {
      background: rgba(51, 65, 85, 0.8);
      color: white;
    }
    
    /* Chat Area */
    .chat-area {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .chat-empty {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: var(--slate-500);
    }
    
    .chat-empty-icon {
      font-size: 48px;
      margin-bottom: 12px;
    }
    
    .chat-empty-text {
      font-size: 14px;
    }
    
    .message {
      display: flex;
      max-width: 85%;
    }
    
    .message.user {
      align-self: flex-end;
    }
    
    .message.assistant {
      align-self: flex-start;
    }
    
    .message-bubble {
      padding: 14px 18px;
      border-radius: 20px;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre-wrap;
    }
    
    .message.user .message-bubble {
      background: linear-gradient(135deg, var(--blue-500) 0%, var(--blue-600) 100%);
      border-bottom-right-radius: 6px;
    }
    
    .message.assistant .message-bubble {
      background: rgba(51, 65, 85, 0.7);
      border-bottom-left-radius: 6px;
    }
    
    .typing-indicator {
      display: flex;
      gap: 4px;
      padding: 14px 18px;
      background: rgba(51, 65, 85, 0.7);
      border-radius: 20px;
      border-bottom-left-radius: 6px;
      align-self: flex-start;
    }
    
    .typing-dot {
      width: 8px;
      height: 8px;
      background: var(--slate-400);
      border-radius: 50%;
      animation: bounce 1.4s infinite ease-in-out;
    }
    
    .typing-dot:nth-child(1) { animation-delay: 0s; }
    .typing-dot:nth-child(2) { animation-delay: 0.2s; }
    .typing-dot:nth-child(3) { animation-delay: 0.4s; }
    
    @keyframes bounce {
      0%, 60%, 100% { transform: translateY(0); }
      30% { transform: translateY(-4px); }
    }
    
    /* Input Area */
    .input-area {
      padding: 12px 16px;
      border-top: 1px solid var(--slate-700);
      display: none;
    }
    
    .input-area.visible {
      display: block;
    }
    
    .input-row {
      display: flex;
      gap: 10px;
    }
    
    .chat-input {
      flex: 1;
      padding: 14px 18px;
      background: rgba(51, 65, 85, 0.5);
      border: 1px solid var(--slate-600);
      border-radius: 14px;
      color: white;
      font-size: 14px;
      font-family: inherit;
    }
    
    .chat-input::placeholder {
      color: var(--slate-500);
    }
    
    .chat-input:focus {
      outline: none;
      border-color: var(--purple-500);
    }
    
    .send-btn {
      padding: 14px 24px;
      border-radius: 14px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      border: none;
      background: linear-gradient(135deg, var(--purple-500) 0%, var(--pink-500) 100%);
      color: white;
      transition: all 0.2s;
    }
    
    .send-btn:hover {
      transform: translateY(-2px);
    }
    
    .send-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Footer */
    .footer {
      background: rgba(30, 41, 59, 0.5);
      border-top: 1px solid var(--slate-700);
      padding: 10px 16px;
    }
    
    .data-sources {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      font-size: 11px;
      color: var(--slate-500);
    }
    
    .data-source {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    
    .source-dot {
      width: 6px;
      height: 6px;
      background: var(--green-500);
      border-radius: 50%;
    }
    
    /* Hidden by default */
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <a href="index.html" style="color: var(--slate-400); text-decoration: none; font-size: 13px; margin-right: 16px;">‚Üê Home</a>
      <div class="logo-icon">üß†</div>
      <div>
        <div class="header-title">Purpose Engine AI</div>
        <div class="header-subtitle">Live Demo ‚Ä¢ 10 Students</div>
      </div>
    </div>
    <div class="status-badge">
      <div class="status-dot"></div>
      <span class="status-text">Demo Mode</span>
    </div>
  </header>
  
  <main class="main">
    <!-- Student Selector -->
    <div class="student-selector">
      <div class="student-card" onclick="toggleStudentList()">
        <div class="student-avatar blue" id="selectedAvatar">MC</div>
        <div class="student-info">
          <div class="student-name" id="selectedName">Maya Chen</div>
          <div class="student-meta" id="selectedMeta">11th ‚Ä¢ Sustainable Design Director</div>
        </div>
        <div class="student-points">
          <div class="points-number" id="selectedPoints">67</div>
          <div class="points-label">pts</div>
        </div>
        <span class="dropdown-arrow">‚ñº</span>
      </div>
      
      <div class="student-list" id="studentList"></div>
      
      <div class="quick-stats" id="quickStats"></div>
    </div>
    
    <!-- Mode Tabs -->
    <div class="mode-tabs">
      <button class="mode-tab active transform" data-mode="transform" onclick="setMode('transform')">
        <span>‚ö°</span> Transform
      </button>
      <button class="mode-tab futureself" data-mode="futureself" onclick="setMode('futureself')">
        <span>üîÆ</span> Future Self
      </button>
      <button class="mode-tab insights" data-mode="insights" onclick="setMode('insights')">
        <span>üìä</span> Insights
      </button>
    </div>
    
    <!-- Controls Panel -->
    <div class="controls" id="controls"></div>
    
    <!-- Chat Area -->
    <div class="chat-area" id="chatArea">
      <div class="chat-empty" id="chatEmpty">
        <div>
          <div class="chat-empty-icon" id="emptyIcon">‚ö°</div>
          <div class="chat-empty-text" id="emptyText">Select an assignment and click Transform</div>
        </div>
      </div>
    </div>
    
    <!-- Input Area (Future Self) -->
    <div class="input-area" id="inputArea">
      <div class="input-row">
        <input type="text" class="chat-input" id="chatInput" placeholder="Ask your Future Self anything..." onkeypress="handleKeyPress(event)">
        <button class="send-btn" onclick="sendFutureSelfMessage()">Send</button>
      </div>
    </div>
    
    <!-- Footer -->
    <div class="footer">
      <div class="data-sources">
        <span class="data-source"><span class="source-dot"></span> PowerSchool</span>
        <span class="data-source"><span class="source-dot"></span> Schoology</span>
        <span class="data-source"><span class="source-dot"></span> Schoolinks</span>
        <span class="data-source"><span class="source-dot"></span> YouScience</span>
      </div>
    </div>
  </main>

  <script>
    // ============================================
    // STUDENT DATABASE
    // ============================================
    const students = [
      {
        id: 1, name: "Maya Chen", avatar: "MC", grade: 11, gpa: 3.4, attendance: 93, points: 67,
        hasAlerts: true, avatarClass: "amber",
        goal: "Sustainable Design Director",
        interests: ["Sustainable Architecture", "Environmental Engineering"],
        purpose: "I want to design buildings that heal the planet.",
        aptitudes: [{ name: "Spatial Visualization", score: 92 }, { name: "Idea Generation", score: 88 }],
        themes: [{ name: "Creative Tech", score: 85, color: "#E86B6B" }, { name: "Environment", score: 72, color: "#4CAF50" }],
        courses: [{ name: "Chemistry", grade: "B+" }, { name: "English III", grade: "A-" }],
        alerts: ["2 missing assignments"]
      },
      {
        id: 2, name: "Jordan Williams", avatar: "JW", grade: 10, gpa: 3.8, attendance: 97, points: 89,
        hasAlerts: false, avatarClass: "blue",
        goal: "Tech Startup Founder",
        interests: ["Software Development", "AI/Machine Learning", "Entrepreneurship"],
        purpose: "Build technology that solves real problems and start my own company before 25.",
        aptitudes: [{ name: "Sequential Reasoning", score: 95 }, { name: "Numerical Reasoning", score: 91 }],
        themes: [{ name: "Technology", score: 92, color: "#5091cd" }, { name: "Entrepreneurship", score: 86, color: "#FFB74D" }],
        courses: [{ name: "AP Computer Science", grade: "A" }, { name: "Algebra II", grade: "A-" }],
        alerts: []
      },
      {
        id: 3, name: "Marcus Rivera", avatar: "MR", grade: 9, gpa: 2.6, attendance: 88, points: 34,
        hasAlerts: true, avatarClass: "amber",
        goal: "Grammy-Winning Music Producer",
        interests: ["Music Production", "Audio Engineering", "Entertainment"],
        purpose: "I want to produce beats and own my own studio.",
        aptitudes: [{ name: "Pitch Discrimination", score: 94 }, { name: "Rhythm Memory", score: 91 }],
        themes: [{ name: "Music & Audio", score: 96, color: "#8B5CF6" }, { name: "Creative", score: 82, color: "#EC4899" }],
        courses: [{ name: "Algebra I", grade: "D+" }, { name: "English I", grade: "C" }],
        alerts: ["Attendance concern", "Math declining"]
      },
      {
        id: 4, name: "Sarah Kim", avatar: "SK", grade: 11, gpa: 4.0, attendance: 99, points: 94,
        hasAlerts: false, avatarClass: "blue",
        goal: "Pediatric Surgeon",
        interests: ["Pediatric Medicine", "Medical Research", "Public Health"],
        purpose: "Become a pediatric surgeon providing healthcare to underserved communities.",
        aptitudes: [{ name: "Numerical Reasoning", score: 97 }, { name: "Sequential Reasoning", score: 94 }],
        themes: [{ name: "Healthcare", score: 98, color: "#10B981" }, { name: "Service", score: 86, color: "#EC4899" }],
        courses: [{ name: "AP Chemistry", grade: "A+" }, { name: "AP Biology", grade: "A" }],
        alerts: []
      },
      {
        id: 5, name: "Tyler Brooks", avatar: "TB", grade: 11, gpa: 2.4, attendance: 85, points: 28,
        hasAlerts: true, avatarClass: "amber",
        goal: "Video Game Designer",
        interests: ["Video Game Design", "Animation", "3D Art"],
        purpose: "Maybe make video games or something.",
        aptitudes: [{ name: "Spatial Visualization", score: 91 }, { name: "Idea Generation", score: 87 }],
        themes: [{ name: "Gaming", score: 92, color: "#8B5CF6" }, { name: "Visual Arts", score: 88, color: "#EC4899" }],
        courses: [{ name: "Chemistry", grade: "D" }, { name: "English III", grade: "C-" }],
        alerts: ["Chronic absenteeism", "Multiple missing assignments"]
      },
      {
        id: 6, name: "Isabella Garcia", avatar: "IG", grade: 12, gpa: 3.7, attendance: 96, points: 88,
        hasAlerts: false, avatarClass: "blue",
        goal: "Immigration Attorney",
        interests: ["Law", "Immigration Policy", "Journalism"],
        purpose: "Become an immigration lawyer to help families like mine.",
        aptitudes: [{ name: "Vocabulary", score: 98 }, { name: "Verbal Reasoning", score: 95 }],
        themes: [{ name: "Justice", score: 96, color: "#8B5CF6" }, { name: "Communication", score: 92, color: "#5091cd" }],
        courses: [{ name: "AP Spanish Lit", grade: "A+" }, { name: "AP Government", grade: "A-" }],
        alerts: []
      },
      {
        id: 7, name: "DeShawn Thompson", avatar: "DT", grade: 10, gpa: 3.2, attendance: 94, points: 71,
        hasAlerts: false, avatarClass: "blue",
        goal: "EV Shop Owner",
        interests: ["Automotive Technology", "Electric Vehicles", "Mechanical Engineering"],
        purpose: "Work on electric vehicles and open my own EV repair shop.",
        aptitudes: [{ name: "Mechanical Reasoning", score: 96 }, { name: "Spatial Visualization", score: 93 }],
        themes: [{ name: "Mechanical", score: 95, color: "#F59E0B" }, { name: "Clean Energy", score: 72, color: "#10B981" }],
        courses: [{ name: "Auto Tech I", grade: "A+" }, { name: "Geometry", grade: "B" }],
        alerts: []
      },
      {
        id: 8, name: "Aaliyah Johnson", avatar: "AJ", grade: 12, gpa: 3.1, attendance: 91, points: 72,
        hasAlerts: true, avatarClass: "amber",
        goal: "Clinical Psychologist",
        interests: ["Clinical Psychology", "Social Work", "Counseling"],
        purpose: "Help young people in my community overcome trauma.",
        aptitudes: [{ name: "Vocabulary", score: 89 }, { name: "Idea Generation", score: 82 }],
        themes: [{ name: "Helping Others", score: 94, color: "#EC4899" }, { name: "Mental Health", score: 88, color: "#8B5CF6" }],
        courses: [{ name: "AP Psychology", grade: "A" }, { name: "Statistics", grade: "C+" }],
        alerts: ["Attendance trending down"]
      },
      {
        id: 9, name: "Kevin Nguyen", avatar: "KN", grade: 12, gpa: 3.8, attendance: 98, points: 91,
        hasAlerts: false, avatarClass: "blue",
        goal: "Quantitative Analyst",
        interests: ["Quantitative Finance", "Data Science", "Algorithmic Trading"],
        purpose: "Use math and programming to revolutionize financial markets.",
        aptitudes: [{ name: "Numerical Reasoning", score: 99 }, { name: "Sequential Reasoning", score: 96 }],
        themes: [{ name: "Quant Analysis", score: 98, color: "#5091cd" }, { name: "Finance", score: 94, color: "#10B981" }],
        courses: [{ name: "AP Calc BC", grade: "A" }, { name: "AP CS", grade: "A+" }],
        alerts: []
      },
      {
        id: 10, name: "Brianna Taylor", avatar: "BT", grade: 9, gpa: 3.0, attendance: 91, points: 52,
        hasAlerts: false, avatarClass: "blue",
        goal: "Professional Dancer",
        interests: ["Dance Performance", "Choreography", "Physical Therapy"],
        purpose: "Perform professionally or help dancers recover from injuries.",
        aptitudes: [{ name: "Rhythm Memory", score: 95 }, { name: "Spatial Visualization", score: 86 }],
        themes: [{ name: "Dance", score: 98, color: "#EC4899" }, { name: "Physical", score: 86, color: "#8B5CF6" }],
        courses: [{ name: "Dance I", grade: "A+" }, { name: "Algebra I", grade: "B-" }],
        alerts: []
      }
    ];

    const assignments = [
      { id: 1, title: "Stoichiometry", subject: "Chemistry", desc: "Calculate molar ratios for equations 1-15" },
      { id: 2, title: "Persuasive Essay", subject: "English", desc: "Write a 5-paragraph persuasive essay" },
      { id: 3, title: "Linear Equations", subject: "Algebra", desc: "Solve systems using substitution" },
      { id: 4, title: "Physics Lab", subject: "Physics", desc: "Document projectile motion calculations" }
    ];

    // ============================================
    // PRE-SCRIPTED DEMO RESPONSES
    // ============================================
    const demoResponses = {
      transform: {
        1: { // Maya Chen - Sustainable Design
          1: `**üå± Eco-Material Design Challenge**

As an aspiring Sustainable Design Director, you've been contacted by a green construction startup that needs your help. They're developing a new plant-based building insulation, but the chemical ratios in their current formula aren't meeting fire safety standards.

Your mission: Calculate the precise molar ratios needed to create a bio-based insulation material that's both eco-friendly AND fire-resistant. The formulation requires balancing calcium silicate compounds with organic binders‚Äîif your stoichiometry is off by even 5%, the material fails certification.

**Why This Matters to You:**
This is EXACTLY what sustainable architects do daily. Your stoichiometry skills will help you evaluate supplier claims, catch formula errors, and design buildings that are both green AND safe.`,
          2: `**üåç Environmental Impact Statement**

As a future Sustainable Design Director, you've been asked to write a persuasive proposal for your city council. A developer wants to build a new shopping center‚Äîbut you believe the land should become an urban green space instead.

Your challenge: Write a 5-paragraph persuasive essay arguing for sustainable land use. Include data on carbon sequestration, urban heat islands, and community health benefits. Your argument must be compelling enough to change minds.

**Why This Matters to You:**
Every major sustainable project requires buy-in from stakeholders who don't share your vision. Your ability to write persuasively about environmental issues will determine whether your designs get built or shelved.`,
          3: `**üìê Solar Array Optimization**

As an aspiring sustainable architect, a client wants to know: how many solar panels do they need, and at what angle, to power a net-zero home in Dallas?

Set up linear equations to model: daily energy consumption vs. panel output at different roof angles. Factor in seasonal variation. Find the optimal configuration that balances cost, space, and energy production.

**Why This Matters to You:**
Every sustainable building you design will require these calculations. Understanding the math behind renewable energy lets you make promises you can actually keep.`,
          4: `**üèóÔ∏è Green Building Physics Lab**

You're interning at a sustainable architecture firm, and your supervisor needs projectile motion calculations‚Äîbut for a real purpose: designing a rainwater collection system.

Calculate the trajectory of water flowing off different roof angles. At what angle does rainwater travel furthest? How does this affect where you place collection tanks? Document your findings as you would for a LEED certification submittal.

**Why This Matters to You:**
Physics isn't abstract when you're designing buildings that harvest their own water. These calculations directly impact whether a building achieves sustainability certifications.`
        },
        2: { // Jordan Williams - Tech Startup
          1: `**‚öóÔ∏è Biotech Startup Chemistry**

As a future tech founder, you're exploring biotech as your next venture. A promising startup needs someone who can verify their claims about a new biodegradable plastic formula.

Calculate the stoichiometric ratios in their proposed polymer. Does the chemistry actually work, or are they overselling? Your ability to analyze this will determine if you invest your time and capital.

**Why This Matters to You:**
The best tech founders understand the science behind their products. Chemistry knowledge lets you evaluate opportunities others can't, and protects you from investing in snake oil.`,
          2: `**üíº Pitch Deck Persuasion**

As an aspiring tech founder, you need investors. Write a 5-paragraph persuasive essay in the form of a pitch deck narrative: convince a VC firm to invest $500K in your AI education startup.

Structure your argument with market size, problem statement, unique solution, traction metrics, and ask. Make every paragraph count.

**Why This Matters to You:**
Every successful founder writes hundreds of persuasive documents‚Äîpitch decks, investor updates, hiring posts. This skill is literally what separates funded startups from failed ideas.`,
          3: `**üìà Startup Financial Modeling**

You're building your first startup's financial model. Set up linear equations to project: user growth rate, monthly recurring revenue, customer acquisition cost, and lifetime value.

At what point do you break even? How many users do you need? What happens if your growth rate changes by 10%? Create a system of equations that models these scenarios.

**Why This Matters to You:**
Investors will tear apart your numbers. Understanding linear relationships lets you build models that survive due diligence and actually predict your business outcomes.`,
          4: `**üöÄ Product Physics: Drone Delivery**

Your startup is building autonomous delivery drones. Document the projectile motion calculations needed to: determine optimal drop height, calculate package trajectory, and ensure soft landings.

Factor in wind resistance and package weight variation. Create a physics specification document that your engineering team can actually use.

**Why This Matters to You:**
Tech founders who understand physics build better products. These calculations are the difference between drones that work and drones that break things.`
        },
        3: { // Marcus Rivera - Music Production
          1: `**üéß Audio Chemistry: Sound Synthesis**

As a future music producer, you're designing a custom synthesizer plugin. The core sound engine models chemical reactions‚Äîeach element's atomic properties determine its waveform characteristics.

Calculate molar ratios to "blend" element-sounds into new instruments. Heavier elements = lower frequencies. Reactive elements = faster attack. Your stoichiometry determines your sound palette.

**Why This Matters to You:**
Synthesis is just math made audible. Producers who understand the science create sounds nobody else can replicate. This is how you develop your signature sound.`,
          2: `**üìù Artist Bio & Press Kit**

As an aspiring producer, you need to sell yourself. Write a persuasive 5-paragraph artist biography that would make blogs, playlists, and labels want to feature you.

Cover your origin story, musical influences, unique value proposition, notable achievements (real or projected), and call to action. Every word must earn its place.

**Why This Matters to You:**
Your music won't market itself. The producers who break through are the ones who can write compelling narratives about their art. This bio will live on Spotify, SoundCloud, and every pitch email you send.`,
          3: `**üéµ Studio Business Calculator**

You're choosing between two recording studio rental options for your first mixtape:

‚Ä¢ Studio A: $200 setup fee + $45/hour
‚Ä¢ Studio B: $500 setup fee + $25/hour

At what point does Studio B become the better deal? You're also negotiating a feature: $800 flat OR $100/hour of studio time. Create equations for BOTH decisions.

**Why This Matters to You:**
Dr. Dre, Metro Boomin, Hit-Boy‚Äîthey all mastered these calculations. Understanding linear equations means you know when to rent vs. buy, how to price beats, and when a deal makes sense.`,
          4: `**üé§ Acoustics Lab: Studio Design**

You're designing your home studio, and sound waves follow physics. Document projectile motion principles as they apply to sound reflection‚Äîat what angles do you place acoustic panels?

Calculate how sound bounces in your room dimensions. Where are the dead spots? The bass traps? Create a studio layout spec based on actual physics.

**Why This Matters to You:**
Bedroom producers with physics knowledge build studios that sound professional. This is the difference between "good enough" and "industry standard."`
        },
        4: { // Sarah Kim - Pediatric Surgeon
          1: `**üè• Pharmaceutical Dosing Chemistry**

As a future pediatric surgeon, a young patient needs medication, but the standard adult dosage must be adjusted. Using stoichiometry, calculate the precise molar concentrations needed for a 35kg child.

Your calculations must account for body mass, metabolic rate variations, and therapeutic windows. An error of even 10% could mean ineffective treatment or dangerous side effects.

**Why This Matters to You:**
Surgeons calculate dosages constantly. The chemistry you're learning now is the same chemistry that will keep your future patients safe. This isn't abstract‚Äîthis is life-or-death precision.`,
          2: `**üìã Medical Ethics Case Study**

As an aspiring pediatric surgeon, you face an ethical dilemma: parents are refusing a life-saving blood transfusion for their child based on religious beliefs.

Write a 5-paragraph persuasive document for the hospital ethics board. Argue your position while acknowledging opposing views. Your writing must be precise, compassionate, and legally sound.

**Why This Matters to You:**
Doctors write constantly‚Äîtreatment plans, ethics consultations, research papers. Your ability to argue persuasively while maintaining empathy will define your career.`,
          3: `**üíâ IV Drip Rate Calculations**

A pediatric patient needs continuous medication through an IV. Set up linear equations to calculate: drip rate based on dosage requirements, time to empty at various rates, and adjustment formulas for weight changes.

Create a quick-reference system nurses could actually use. Factor in medication concentration variations.

**Why This Matters to You:**
Medical math errors kill patients. The linear equation skills you're building now will become second nature‚Äîbecause in surgery, you won't have time to think about the math.`,
          4: `**üî¨ Surgical Physics: Laparoscopic Tools**

You're learning laparoscopic surgery, where instruments enter through tiny incisions. Document the projectile motion and physics of how tools move in 3D space when pivoting through a fixed entry point.

Calculate ranges of motion, force requirements, and precision tolerances. Create a physics guide for surgical residents.

**Why This Matters to You:**
Modern surgery is applied physics. Understanding these principles now means you'll develop muscle memory faster and make fewer errors when you're actually operating.`
        },
        5: { // Tyler Brooks - Game Designer
          1: `**üéÆ Game Chemistry: Crafting System Design**

As a future game designer, you're building a realistic alchemy system for an open-world RPG. The lead developer wants crafting to feel "scientifically grounded."

Design recipes using REAL stoichiometric ratios. If players combine iron ore (Fe‚ÇÇO‚ÇÉ) with charcoal (C), what ratio produces iron ingots? What happens with wrong ratios?

**Why This Matters to You:**
The BEST crafting systems feel internally consistent. Understanding real chemistry lets you build systems players can master, not just memorize. This goes straight in your portfolio.`,
          2: `**üìñ Game Narrative Writing**

As an aspiring game designer, your indie team needs quest dialogue. Write a 5-paragraph persuasive essay... in the voice of an NPC convincing the player to undertake a dangerous quest.

Use classic persuasion techniques while maintaining character voice. The essay structure becomes your dialogue tree framework.

**Why This Matters to You:**
Game writers are in high demand. Understanding persuasive structure lets you write dialogue that players actually engage with instead of clicking through.`,
          3: `**üéØ Game Balance Mathematics**

You're balancing an RPG's economy. Set up linear equations for: XP required per level, gold drops vs. item costs, and damage scaling vs. enemy health.

Find the points where the game becomes too easy or impossibly hard. Create a balance spreadsheet with visual graphs.

**Why This Matters to You:**
Game balance is applied mathematics. Designers who can model systems mathematically ship games that players love instead of abandon.`,
          4: `**üïπÔ∏è Physics Engine Documentation**

You're documenting your game's physics engine for the QA team. Create projectile motion specifications: how far should arrows travel? At what arc? How does gravity affect different projectile types?

Include edge cases and expected behaviors. This becomes your physics bible.

**Why This Matters to You:**
Game physics that "feel wrong" ruin immersion. Understanding real physics lets you tune engines that feel satisfying, even when they're not perfectly realistic.`
        },
        6: { // Aisha Patel - Data Scientist/Policy Analyst
          1: `**üìä Environmental Data Chemistry**

As a future data scientist focused on policy, you're analyzing water quality data from different neighborhoods. But the lab reports use chemical concentrations you need to convert.

Calculate molar masses and convert between ppm, molarity, and mg/L for contaminants like lead (Pb) and arsenic (As). Your stoichiometry determines whether your policy recommendations are based on accurate data.

**Why This Matters to You:**
Data scientists who can't verify their inputs produce garbage outputs. Chemistry literacy lets you catch errors that would otherwise invalidate entire analyses.`,
          3: `**üìà Equity Analysis Modeling**

You're building a model to predict which neighborhoods are underserved by city resources. Set up linear equations relating: median income, service response times, infrastructure investment, and health outcomes.

Find the correlation coefficients. Where does the system fail certain communities? Create visualizations that make the inequity undeniable.

**Why This Matters to You:**
Policy analysts who can model inequity mathematically drive actual change. These are the skills that turn data into justice.`
        },
        7: { // Ethan O'Brien - Construction Manager  
          1: `**üèóÔ∏è Concrete Mix Chemistry**

As a future construction manager, your supplier claims their new eco-concrete formula is just as strong as traditional Portland cement. Calculate the stoichiometric ratios in both mixes.

Does their chemistry actually support the strength claims? What's the curing time difference? Your ability to verify these calculations protects your projects and your workers.

**Why This Matters to You:**
Construction failures cost lives. Managers who understand materials chemistry catch problems before they become disasters.`,
          3: `**üìê Project Budget Linear Modeling**

You're bidding on a new commercial building. Set up linear equations for: labor costs over time, material price escalation, equipment rental optimization.

At what crew size is the project most profitable? How do change orders affect your margins? Create a bid model that wins contracts AND makes money.

**Why This Matters to You:**
Construction bids are won and lost on mathematics. Understanding linear relationships lets you price jobs accurately and avoid the money-losing projects that sink contractors.`
        },
        8: { // Priya Sharma - Veterinarian
          1: `**üêæ Veterinary Pharmaceutical Chemistry**

As a future veterinarian, a Great Dane and a Chihuahua both need the same medication. Using stoichiometry, calculate the precise dosing differences based on body mass and metabolic rates.

Show your work for how molar concentrations translate to mg/kg dosing. One mistake could harm an animal that trusts you completely.

**Why This Matters to You:**
Vets calculate dosages for species ranging from hamsters to horses. Your chemistry skills directly translate to animal lives saved.`,
          4: `**üî¨ Animal Biomechanics Lab**

You're documenting how different animals move for a rehabilitation protocol. Track the projectile motion of a dog's leg during various gaits‚Äîwalk, trot, run.

Calculate joint angles, force distributions, and recovery trajectories. Create a physical therapy specification sheet.

**Why This Matters to You:**
Veterinary rehabilitation is growing fast. Understanding biomechanics physics lets you design recovery programs that actually work.`
        },
        9: { // Chris Taylor - App Developer/Entrepreneur
          1: `**üíª Battery Chemistry for Mobile Apps**

As a future app developer, you're optimizing your app's battery usage. Understanding how lithium-ion batteries actually work‚Äîat the chemical level‚Äîhelps you make smarter code decisions.

Calculate the stoichiometry of charging/discharging cycles. How does temperature affect these reactions? What does this mean for your app's background processes?

**Why This Matters to You:**
Apps that drain batteries get uninstalled. Developers who understand the chemistry write code that users keep.`,
          3: `**üì± App Monetization Modeling**

You're launching a freemium app. Set up linear equations for: user acquisition cost, free-to-paid conversion rates, lifetime value, and churn.

At what conversion rate are you profitable? How many downloads do you need? Create a financial model that helps you decide: ads, subscriptions, or one-time purchase?

**Why This Matters to You:**
Most apps fail because the math never worked. Understanding these equations BEFORE you code saves you from building something nobody can sustain.`
        },
        10: { // Nina Rodriguez - Professional Dancer
          1: `**üíÉ Nutrition Chemistry for Athletes**

As a future professional dancer, your body is your instrument. Understanding the chemistry of nutrition‚Äîhow carbohydrates, proteins, and fats break down‚Äîhelps you fuel performances optimally.

Calculate molar ratios for ideal macronutrient balance before a 3-hour rehearsal vs. a 10-minute performance. How does timing affect energy availability?

**Why This Matters to You:**
Elite dancers treat nutrition as science, not guesswork. Chemistry knowledge gives you a competitive edge in a field where margins are razor-thin.`,
          4: `**ü©∞ Dance Physics: Movement Analysis**

You're creating a training guide for young dancers. Document the projectile motion physics of a grand jet√©‚Äîlaunch angle, peak height, distance traveled.

How does arm position affect momentum? What's the optimal approach speed? Create a physics-based technique guide.

**Why This Matters to You:**
Dancers who understand the physics of movement improve faster and injure less. This could be your first choreography teaching resource.`
        }
      },
      futureself: {
        1: { // Maya
          default: `Hey, younger me. I remember sitting exactly where you are‚Äîjunior year, wondering if any of this chemistry stuff would ever matter.

I'm writing this from my office at the firm. We just finished a net-zero community center, and last week I had to reject a supplier's insulation material because the fire-retardant ratios were off. I caught it because I actually understood the stoichiometry. That knowledge has saved projects‚Äîand potentially lives.

The thing I wish someone had told me: the "boring" foundational stuff IS the creative work. You can't push boundaries in sustainable design if you don't understand the science of materials. Every building I design, I'm doing chemistry. Keep pushing through it. I promise it clicks.`
        },
        2: { // Jordan
          default: `Hey, it's future you‚Äîwriting from the office of my third startup. First two failed, by the way. But I learned more from those failures than any success.

Here's what I wish I'd known at your age: the skills that matter most aren't the obvious ones. Everyone at MIT could code. What set me apart was writing‚Äîpitch decks, investor updates, hiring posts. The persuasive essay skills you're building? They raised my first million.

Also: chemistry. I know, I know. But my second startup was biotech-adjacent, and I couldn't evaluate the science. That's part of why it failed. Broad knowledge wins. Stay curious about everything.`
        },
        3: { // Marcus
          default: `Yo, young Marcus. It's us‚Äîfrom the future. And yeah, we made it. Grammy on the shelf, studio's paid off.

But real talk? I almost didn't get here because I thought math was pointless. Here's what I didn't understand back then: running a studio IS running a business. Every beat you sell, every feature you negotiate, every equipment lease‚Äîit's all equations.

I lost $40,000 on a bad record deal in my early twenties because I didn't understand the math behind royalty splits. That setback almost ended my career. The algebra you're avoiding right now? It's literally the difference between getting played and getting paid. Trust me on this one.`
        },
        4: { // Sarah
          default: `Hi, younger me. I'm writing this between surgeries‚Äîyes, we made it. Pediatric surgeon at Children's Medical.

I remember thinking I only needed to know "doctor stuff." Here's what nobody told me: medicine is chemistry, physics, and persuasion all combined. I use stoichiometry when adjusting dosages. I use physics when operating laparoscopic tools. I write persuasively when explaining treatment plans to scared parents.

The hardest part of this job isn't the surgery‚Äîit's communication. The essay writing you're doing now? That's practice for the most important conversations of your career. Don't skip the humanities.`
        },
        5: { // Tyler
          default: `Hey Tyler. Yeah, I know‚Äîschool feels pointless. I remember skipping class to watch game design tutorials, thinking "why do I need chemistry to make games?"

Here's what I learned the hard way: I got my first game dev job at 24, and within a month I was assigned to build a crafting system. Lead designer asked me to make it "feel real." I had to google stoichiometry because I'd slept through it in high school. I was embarrassed.

The devs who get promoted fastest? They're the ones who can bridge disciplines. Artists who understand physics. Programmers who get music theory. And yes, game designers who actually know chemistry. You've got the spatial skills‚ÄîI can see it in your aptitude scores. Now build the knowledge to match. Future you will thank you.`
        },
        6: { // Aisha
          default: `Hey younger Aisha. I'm writing from my office at the Urban Policy Institute‚Äîwe just published research that's actually changing zoning laws in three cities.

The path here wasn't straight. I thought data science was all about code and algorithms. Turns out, the hard part is understanding what the data MEANS. When I analyze water quality, I need chemistry. When I model transportation, I need physics. When I present to city councils, I need to persuade.

Your diverse interests aren't a weakness‚Äîthey're your superpower. The analysts who change things are the ones who see connections others miss. Keep building that broad foundation.`
        },
        7: { // Ethan
          default: `Hey kid. Just walked a billion-dollar hospital project, and I thought of you‚Äîof us, I guess.

I know construction doesn't feel like it needs "school stuff." I thought the same thing. But here's what changed my career: I understood the chemistry of concrete better than my competitors. When suppliers tried to cut corners, I caught it. When architects proposed materials that wouldn't work, I could explain why.

The foremen who stay foremen know how to build. The managers who build empires know why things work. Chemistry and physics aren't extra‚Äîthey're what separates workers from leaders.`
        },
        8: { // Priya
          default: `Hi, younger me. I'm on break at the veterinary hospital‚Äîjust finished surgery on a German Shepherd.

I remember thinking I just needed to love animals. Love matters, but it's not enough. Today I calculated dosages for three different species, analyzed bloodwork chemistry, and wrote a persuasive case for experimental treatment to a worried family.

Every subject you're studying shows up in my work. Chemistry keeps animals safe. Physics helps me understand biomechanics. Writing helps me comfort scared pet owners. You're not studying random subjects‚Äîyou're building the toolkit that will save lives.`
        },
        9: { // Chris
          default: `Hey, younger Chris. Writing from my home office‚Äîone of my apps just hit a million users. Still feels surreal.

But here's what the influencers don't tell you: most of my time isn't coding. It's math‚Äîfinancial models, pricing strategies, conversion funnels. The app that took off? I finally understood the economics before building it.

And chemistry, weirdly. Battery optimization, thermal throttling, understanding why certain code patterns drain power‚Äîit all comes back to how atoms actually work. The developers who build sustainable apps understand the physical world their software runs on. Keep learning broadly.`
        },
        10: { // Nina
          default: `Hey baby dancer. I'm writing from the studio‚Äîjust finished choreographing for a Broadway touring show.

I know you think dance is all you need. And the passion matters. But the dancers who get hired and stay healthy? They understand their bodies scientifically. I use chemistry for nutrition timing. Physics for understanding momentum and injury prevention. Writing for grant applications and artist statements.

The dance world is brutally competitive. What set me apart wasn't just talent‚Äîit was treating my career like a science. Every subject you're learning makes you a more complete artist.`
        }
      },
      insights: {
        1: { // Maya
          celebration: `**üéâ Celebration Opportunities for Maya:**

1. **Chemistry Connection Made**: Maya independently connected stoichiometry concepts to sustainable building materials last week‚Äîthis shows her Purpose Engine alignment is working. Acknowledge this in class!

2. **Purpose Points Trending Up**: +18% this semester despite recent absences. Her engagement with career-relevant content is strong.

3. **Tesla Visit Impact**: The Gigafactory tour generated genuine excitement. She asked about battery chemistry and material sourcing‚Äîperfect entry point for upcoming lessons.

**Recommended Action**: Pull Maya aside and say: "I noticed you made that connection between molar ratios and eco-materials‚Äîthat's exactly how sustainable architects think. Want to present that angle to the class?"`,
          warning: `**‚ö†Ô∏è Early Warning Signals for Maya:**

1. **Pattern Break**: 2 absences + 2 missing assignments this week is unusual for her. Historical pattern shows she typically maintains 95%+ completion.

2. **Morning vs. Afternoon Split**: Engagement data shows she's quieter in morning classes, more engaged after lunch. Possible sleep/home situation?

3. **Chemistry Gap**: Despite strong purpose alignment, her procedural chemistry skills lag conceptual understanding. May need scaffolding on calculations.

**Recommended Actions**:
- Casual check-in: "Hey Maya, noticed you've been out a couple days. Everything okay?"
- Offer the missing work reframed as the Eco-Material Challenge
- Consider morning check-in routine to catch disengagement early`
        },
        2: { // Jordan
          celebration: `**üéâ Celebration Opportunities for Jordan:**

1. **Natural Leader**: Other students gravitate toward Jordan during group work. Strong collaboration scores across all classes.

2. **Entrepreneurial Thinking**: Already applying startup mindset to school projects‚Äîcreated a study group that operates like a mini-company.

3. **Cross-Disciplinary Strength**: High performance across both technical and humanities courses shows versatile founder potential.

**Recommended Action**: Connect Jordan with the school's entrepreneurship club or Junior Achievement program. Consider having them mentor younger students interested in business.`,
          warning: `**‚ö†Ô∏è Watch Points for Jordan:**

1. **Perfectionism Pattern**: Takes on too much, sometimes sacrifices depth for breadth. Could lead to burnout.

2. **Collaboration Overload**: Helps others so much that personal work occasionally suffers.

**Recommended Actions**:
- Acknowledge their leadership while encouraging boundaries
- Check that group work credit properly reflects their contributions`
        },
        3: { // Marcus
          celebration: `**üéâ Hidden Strengths to Celebrate - Marcus:**

1. **Elite Auditory Aptitudes**: 94th percentile in pitch discrimination, 91st in rhythm memory. These are RARE cognitive gifts‚ÄîMarcus should know he has professional-level audio processing abilities.

2. **Biology Engagement**: He's actually maintaining a B- in Biology despite struggles elsewhere. Lab work engages him‚Äîhands-on learning is his strength.

3. **Purpose Clarity**: Unlike many 9th graders, Marcus has a specific, achievable dream. Music production is a real career path.

**Recommended Action**: Connect with Marcus about his music. Ask what DAW he uses, what producers he admires. Then bridge: "You know, audio engineering is basically applied physics and math. Want to see how?"`,
          warning: `**‚ö†Ô∏è Critical Intervention Needed - Marcus:**

1. **Disengagement Spiral**: 3 days since last LMS login. Algebra grade at D+ puts him at risk of retention.

2. **Attendance Pattern**: 88% overall but declining. Often absent Mondays and Fridays‚Äîpossible weekend factors?

3. **System Mismatch**: His cognitive profile (94th percentile audio, 91st rhythm) doesn't match traditional instruction methods. He's not struggling because he can't learn‚Äîhe's struggling because we're not teaching to his strengths.

**Urgent Actions**:
- Frame math through music production lens (studio costs, beat pricing, royalty splits)
- Consider audio-based learning accommodations
- Parent contact to understand attendance pattern
- Connect with music teacher for cross-curricular support`
        },
        4: { // Sarah
          celebration: `**üéâ Celebration Opportunities for Sarah:**

1. **Academic Excellence**: Maintaining near-perfect GPA while pursuing rigorous pre-med track. This level of sustained performance deserves recognition.

2. **Service Leadership**: 86% engagement in healthcare service activities. Already building the compassion skills medicine requires.

3. **Mentorship Potential**: Other students seek her help. She explains concepts clearly‚Äîa skill that will serve her as a teaching physician.

**Recommended Action**: Sarah's ready for additional challenge. Consider independent study options or connections with local medical professionals for shadowing.`,
          warning: `**‚ö†Ô∏è Watch Points for Sarah:**

1. **Perfectionism Risk**: 4.0 GPA with 99% attendance might mask unsustainable pressure. Check in on stress levels.

2. **Balance Concern**: High performance across all metrics, but where's her fun? Medical school applicants need to show "whole person" development.

**Recommended Actions**:
- Acknowledge her excellence without adding pressure
- Encourage extracurriculars that aren't resume-driven
- Watch for signs of anxiety or burnout`
        },
        5: { // Tyler
          celebration: `**üéâ Hidden Strengths in Tyler:**

1. **Spatial Reasoning Elite**: 91st percentile in 3D visualization. This is the exact skill game designers and architects need.

2. **Problem-Solving Persistence**: When engaged (usually with tech projects), Tyler shows remarkable persistence. He rebuilt a computer from parts.

3. **Untapped Potential**: The gap between his aptitude scores and grades suggests disengagement, not inability. He's capable of much more.

**Recommended Action**: Find Tyler's entry point‚Äîgaming, computers, design. Then bridge: "You know, the game developers who make the best physics engines? They aced their science classes. Want to know why?"`,
          warning: `**‚ö†Ô∏è Urgent Concerns for Tyler:**

1. **Severe Disengagement**: 2.1 GPA with 78% attendance. Multiple failing grades if this continues.

2. **Escape Pattern**: High screen time, gaming as avoidance. Social isolation concerns.

3. **Misalignment**: Tyler sees zero connection between school and his interests. Purpose Engine can help, but needs immediate intervention.

**Urgent Actions**:
- Non-judgmental check-in about what's going on at home/socially
- Reframe failing classes through game design lens immediately
- Connect with school counselor for social-emotional support
- Parent meeting to align on intervention strategy`
        }
      }
    };

    // ============================================
    // STATE
    // ============================================
    let selectedStudent = students[0];
    let currentMode = 'transform';
    let selectedAssignment = assignments[0];
    let messages = [];
    let isLoading = false;

    // ============================================
    // INITIALIZATION
    // ============================================
    function init() {
      renderStudentList();
      updateSelectedStudent();
      renderControls();
      renderChat();
    }

    function renderStudentList() {
      const list = document.getElementById('studentList');
      list.innerHTML = students.map(s => `
        <div class="student-list-item ${s.id === selectedStudent.id ? 'selected' : ''}" onclick="selectStudent(${s.id})">
          <div class="student-list-avatar ${s.hasAlerts ? 'amber' : 'blue'}" style="background: linear-gradient(135deg, ${s.hasAlerts ? '#F59E0B' : '#0067b1'} 0%, ${s.hasAlerts ? '#F97316' : '#004b85'} 100%)">${s.avatar}</div>
          <div class="student-list-info">
            <div class="student-list-name">${s.name}</div>
            <div class="student-list-meta">${s.grade}th ‚Ä¢ GPA ${s.gpa}</div>
          </div>
          <div class="student-list-points">${s.points}</div>
        </div>
      `).join('');
    }

    function updateSelectedStudent() {
      const s = selectedStudent;
      document.getElementById('selectedAvatar').textContent = s.avatar;
      document.getElementById('selectedAvatar').className = `student-avatar ${s.hasAlerts ? 'amber' : 'blue'}`;
      document.getElementById('selectedAvatar').style.background = `linear-gradient(135deg, ${s.hasAlerts ? '#F59E0B' : '#0067b1'} 0%, ${s.hasAlerts ? '#F97316' : '#004b85'} 100%)`;
      document.getElementById('selectedName').textContent = s.name;
      document.getElementById('selectedMeta').textContent = `${s.grade}th ‚Ä¢ ${s.goal}`;
      document.getElementById('selectedPoints').textContent = s.points;
      
      // Quick stats
      document.getElementById('quickStats').innerHTML = `
        <div class="stat-badge"><span class="stat-label">GPA</span> <span class="stat-value">${s.gpa}</span></div>
        <div class="stat-badge"><span class="stat-label">Attend</span> <span class="stat-value">${s.attendance}%</span></div>
        ${s.themes.map(t => `
          <div class="stat-badge">
            <span class="theme-dot" style="background: ${t.color}"></span>
            <span>${t.name}</span>
            <span class="stat-value">${t.score}%</span>
          </div>
        `).join('')}
      `;
    }

    function toggleStudentList() {
      document.getElementById('studentList').classList.toggle('open');
    }

    function selectStudent(id) {
      selectedStudent = students.find(s => s.id === id);
      updateSelectedStudent();
      renderStudentList();
      toggleStudentList();
      messages = [];
      renderChat();
    }

    function setMode(mode) {
      currentMode = mode;
      document.querySelectorAll('.mode-tab').forEach(t => t.classList.remove('active'));
      document.querySelector(`.mode-tab[data-mode="${mode}"]`).classList.add('active');
      
      document.getElementById('inputArea').classList.toggle('visible', mode === 'futureself');
      
      const icons = { transform: '‚ö°', futureself: 'üîÆ', insights: 'üìä' };
      const texts = { 
        transform: 'Select an assignment and click Transform',
        futureself: 'Ask your Future Self a question',
        insights: 'Select a query to analyze this student'
      };
      document.getElementById('emptyIcon').textContent = icons[mode];
      document.getElementById('emptyText').textContent = texts[mode];
      
      messages = [];
      renderControls();
      renderChat();
    }

    function renderControls() {
      const controls = document.getElementById('controls');
      
      if (currentMode === 'transform') {
        controls.innerHTML = `
          <div class="assignment-pills">
            ${assignments.map(a => `
              <button class="assignment-pill ${a.id === selectedAssignment.id ? 'selected' : ''}" onclick="selectAssignment(${a.id})">${a.title}</button>
            `).join('')}
          </div>
          <textarea class="custom-input" id="customInput" placeholder="Or paste any assignment here..."></textarea>
          <button class="transform-btn" id="transformBtn" onclick="handleTransform()">‚ö° Transform Assignment</button>
        `;
      } else if (currentMode === 'futureself') {
        controls.innerHTML = `
          <div class="suggestion-pills">
            <button class="suggestion-pill" onclick="askFutureSelf('Why do I need to learn this?')">Why do I need this?</button>
            <button class="suggestion-pill" onclick="askFutureSelf('Did you ever feel like giving up?')">Did you want to give up?</button>
            <button class="suggestion-pill" onclick="askFutureSelf('What should I focus on this year?')">What should I focus on?</button>
          </div>
        `;
      } else {
        controls.innerHTML = `
          <div class="suggestion-pills">
            <button class="suggestion-pill" onclick="handleInsight('celebration')">üéâ Celebration opportunities?</button>
            <button class="suggestion-pill" onclick="handleInsight('warning')">‚ö†Ô∏è Warning signs to watch?</button>
          </div>
        `;
      }
    }

    function selectAssignment(id) {
      selectedAssignment = assignments.find(a => a.id === id);
      renderControls();
    }

    function renderChat() {
      const chatArea = document.getElementById('chatArea');
      const empty = document.getElementById('chatEmpty');
      
      if (messages.length === 0) {
        empty.classList.remove('hidden');
        chatArea.innerHTML = '';
        chatArea.appendChild(empty);
        return;
      }
      
      empty.classList.add('hidden');
      chatArea.innerHTML = messages.map(m => `
        <div class="message ${m.role}">
          <div class="message-bubble">${m.content}</div>
        </div>
      `).join('');
      
      if (isLoading) {
        chatArea.innerHTML += `
          <div class="typing-indicator">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        `;
      }
      
      chatArea.scrollTop = chatArea.scrollHeight;
    }

    // ============================================
    // HANDLERS
    // ============================================
    function handleTransform() {
      const custom = document.getElementById('customInput')?.value || '';
      const assignmentText = custom || `${selectedAssignment.title}: ${selectedAssignment.desc}`;
      
      messages = [{ role: 'user', content: `Transform for ${selectedStudent.name}:\n\n"${assignmentText}"` }];
      isLoading = true;
      renderChat();
      
      setTimeout(() => {
        isLoading = false;
        // Get pre-scripted response or generate a reasonable default
        const studentResponses = demoResponses.transform[selectedStudent.id];
        let response = studentResponses?.[selectedAssignment.id];
        
        if (!response) {
          response = generateDefaultTransform(selectedStudent, assignmentText);
        }
        
        messages.push({ role: 'assistant', content: response });
        renderChat();
      }, 1500);
    }

    function generateDefaultTransform(student, assignment) {
      return `**üéØ Purpose-Driven Challenge for ${student.name}**

As an aspiring ${student.goal}, this assignment connects directly to skills you'll use in your career.

**Your Challenge:**
${assignment}

But here's the twist‚Äîapproach this through the lens of ${student.interests[0]}. How would a professional in your field tackle this same problem?

**Why This Matters to You:**
Your aptitude scores show exceptional ${student.aptitudes[0].name} (${student.aptitudes[0].score}%). This assignment builds on that natural strength while preparing you for real-world applications in ${student.interests[0]}.

The skills you're developing here are the same ones that ${student.goal}s use daily. This isn't busywork‚Äîit's preparation for the future you're building.`;
    }

    function askFutureSelf(question) {
      document.getElementById('chatInput').value = question;
      sendFutureSelfMessage();
    }

    function sendFutureSelfMessage() {
      const input = document.getElementById('chatInput');
      const question = input.value.trim();
      if (!question) return;
      
      input.value = '';
      messages.push({ role: 'user', content: question });
      isLoading = true;
      renderChat();
      
      setTimeout(() => {
        isLoading = false;
        const studentResponses = demoResponses.futureself[selectedStudent.id];
        let response = studentResponses?.default || generateDefaultFutureSelf(selectedStudent, question);
        
        messages.push({ role: 'assistant', content: response });
        renderChat();
      }, 1800);
    }

    function generateDefaultFutureSelf(student, question) {
      return `Hey, younger me. I remember wondering the same thing when I was in ${student.grade}th grade.

Now that I'm a ${student.goal}, I can tell you‚Äîeverything you're going through is building toward this moment. Your ${student.aptitudes[0].name} skills? I use them every single day.

The struggles feel pointless now, but trust me: every challenge you push through is practice for the bigger ones ahead. And those you'll actually WANT to solve because they'll be about ${student.interests[0]}.

Keep going. I'm proof that you make it.`;
    }

    function handleInsight(type) {
      const query = type === 'celebration' ? 'üéâ What are the celebration opportunities?' : '‚ö†Ô∏è What warning signs should I watch?';
      
      messages = [{ role: 'user', content: query }];
      isLoading = true;
      renderChat();
      
      setTimeout(() => {
        isLoading = false;
        const studentInsights = demoResponses.insights[selectedStudent.id];
        let response = studentInsights?.[type] || generateDefaultInsight(selectedStudent, type);
        
        messages.push({ role: 'assistant', content: response });
        renderChat();
      }, 1500);
    }

    function generateDefaultInsight(student, type) {
      if (type === 'celebration') {
        return `**üéâ Celebration Opportunities for ${student.name}:**

1. **Strong Purpose Alignment**: ${student.name}'s interest in ${student.interests[0]} shows clear career direction‚Äîrare for a ${student.grade}th grader!

2. **Aptitude Strengths**: ${student.aptitudes[0].score}th percentile in ${student.aptitudes[0].name}. This is a genuine cognitive gift worth acknowledging.

3. **Purpose Points**: Currently at ${student.points} points with positive trajectory.

**Recommended Action**: Acknowledge their career clarity and connect upcoming lessons to ${student.interests[0]} applications.`;
      } else {
        return `**‚ö†Ô∏è Areas to Monitor for ${student.name}:**

1. **Attendance**: Currently at ${student.attendance}%${student.attendance < 92 ? ' - below target' : ' - stable'}.

2. **GPA Trajectory**: ${student.gpa}${student.gpa < 3.0 ? ' - may need academic support' : ' - on track'}.

${student.alerts.length > 0 ? `3. **Active Alerts**: ${student.alerts.join(', ')}` : '3. **No Active Alerts**: Continue monitoring engagement patterns.'}

**Recommended Actions**: 
- ${student.alerts.length > 0 ? 'Address alerts with purpose-connected framing' : 'Maintain current support level'}
- Connect with ${student.name} about ${student.interests[0]} to strengthen engagement`;
      }
    }

    function handleKeyPress(e) {
      if (e.key === 'Enter') sendFutureSelfMessage();
    }

    // Initialize on load
    init();
  </script>
</body>
</html>
